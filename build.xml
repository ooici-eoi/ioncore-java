<project name="ION-java" default="info">
	
	<!-- set global properties for this build -->
	<property name="projname" value="ioncore"/>
	<property name="version" value="0.1.0"/>
	<property name="src" location="src"/>
	<property name="build" location="build"/>
	<property name="classes" location="${build}/classes"/>
	<property name="dist"  location="dist"/>

	<path id="libs-core">
		<pathelement location="./lib/commons-cli-1.1.jar"/>
		<pathelement location="./lib/commons-io-1.2.jar"/>
		<pathelement location="./lib/json_simple-1.1.jar"/>
		<pathelement location="./lib/msgpack-0.3.jar"/>
		<pathelement location="./lib/rabbitmq-client.jar"/>
	</path>
		
	<path id="libs-example">
		<pathelement location="./bin"/>
		<path refid="libs-core"/>
	</path>

	<target name="info" depends="" description="Hello">
		<echo message="ION Java library build. Please specify a target."/>
	</target>

	<!-- ================================= 
          target: compile              
         ================================= -->
	<target name="compile" depends="" description="Compile Sources">
		<mkdir dir="${classes}"/>
		<javac srcdir="${src}" destdir="${classes}" debug="on" classpathref="libs-example"/>
	</target>
	
	<!-- ================================= 
          target: runex              
         ================================= -->
	<target name="runex" depends="compile" description="Run Example">
		<java classname="ion.example.ServiceConsume">
			<classpath refid="libs-example"/>
		</java>
	</target>

	<!-- ================================= 
          target: dist              
         ================================= -->
	<target name="dist" depends="compile" description="Package Distribution">
	    <!-- Create the distribution directory -->
	    <mkdir dir="${dist}/lib"/>

	    <!-- Create JAR file with library classes, tests and example code -->
	    <jar jarfile="${dist}/lib/${projname}-full-${version}.jar" basedir="${classes}"/>

	    <!-- Create JAR file with all library classes -->
		<jar jarfile="${dist}/lib/${projname}-${version}.jar" 
	    	basedir="${classes}"
	    	excludes="ion/example/**"
		/>
	</target>

	<!-- ================================= 
          target: clean              
         ================================= -->
    <target name="clean" depends="" description="Clean Outputs">
    	<delete dir="${classes}"/>
    	<delete dir="${build}"/>
    	<delete dir="${dist}"/>
    </target>

</project>