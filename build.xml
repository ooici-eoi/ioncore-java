<project name="RabbitOSGi" default="bundles">
	
	<path id="libs">
		<pathelement location="./runtime/com.rabbitmq.client_1.5.0.beta.jar"/>
		<pathelement location="./runtime/equinox.jar"/>
		<pathelement location="./runtime/equinox_cm.jar"/>
		<pathelement location="./runtime/fileinstall-1.3.4.jar"/>
		<pathelement location="./runtime/org.apache.commons.io_1.2.0.jar"/>
		<pathelement location="./runtime/org.apache.log4j_1.2.15.jar"/>
		<pathelement location="./runtime/org.eclipse.equinox.util_1.0.1.v20081205-1800.jar"/>
		<pathelement location="./runtime/org.eclipse.equinox.wireadmin_1.0.0.v20080407.jar"/>
		<pathelement location="./runtime/org.eclipse.osgi.util_3.2.0.v20081205-1800.jar"/>
		<pathelement location="./runtime/osgi.cmpn.jar"/>
		<pathelement location="./libsrc/amq-spring-integration-support-1.0.jar"/>
		<pathelement location="./libsrc/amq-template-1.0.jar"/>
		<pathelement location="./libsrc/com.rabbitmq.client.sources_1.5.0.beta.jar"/>
		<pathelement location="./libsrc/equinox.source.jar"/>
		<pathelement location="./libsrc/equinox_cm_source.jar"/>
		<pathelement location="./libsrc/junit-4.8.1.jar"/>
		<pathelement location="./libsrc/log4j-1.2.14.jar"/>
		<pathelement location="./libsrc/mockito-all-1.8.2.jar"/>
		<pathelement location="./libsrc/opencredo-amq-parent-1.0-tests.jar"/>
		<pathelement location="./libsrc/osgi.cmpn.sources.jar"/>
		<pathelement location="./libsrc/slf4j-api-1.5.11.jar"/>
		<pathelement location="./libsrc/spring-2.5.6.SEC01.jar"/>
		<pathelement location="./libsrc/spring-context-support-2.5.6.jar"/>
		<pathelement location="./libsrc/spring-integration-adapter-1.0.3.RELEASE.jar"/>
		<pathelement location="./libsrc/spring-integration-core-1.0.3.RELEASE.jar"/>
		<pathelement location="./libsrc/spring-test-2.5.6.SEC01.jar"/>
		<pathelement location="./libsrc/spring-tx-2.5.6.jar"/>

	</path>

	<!-- ================================= 
          target: compile              
         ================================= -->
	<target name="compile" depends="" description="Compile Sources">
		<mkdir dir="classes"/>
		<javac srcdir="src" destdir="classes" debug="on" classpathref="libs"/>
	</target>
	
	<!-- ================================= 
          target: bundles              
         ================================= -->
    <target name="bundles" depends="compile" description="Build OSGi Bundles">
        <taskdef resource="aQute/bnd/ant/taskdef.properties" classpath="bnd-0.0.255.jar"/>
    	<pathconvert property="bndfiles" pathsep="," dirsep="/">
    		<fileset dir="load" includes="*.bnd"/>
    	</pathconvert>
    	<bnd classpath="classes" failok="false" files="${bndfiles}" output="load"/>
    </target>
	
	<!-- ================================= 
          target: clean              
         ================================= -->
    <target name="clean" depends="" description="Clean Outputs">
        <delete dir="load" includes="*.jar"/>
    	<delete dir="classes"/>
    </target>

</project>